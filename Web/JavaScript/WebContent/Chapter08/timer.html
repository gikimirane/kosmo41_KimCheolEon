<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>08-09 : 타이머를 가진 웹 워커 만들기</title>
</head>
<body>
	<h3>타이머를 가진 웹 워커 만들기</h3>
	<hr>
	<div>
		<span id="timer">타이머카운트</span>
	</div>
	<button id="start" onclick="start()">start</button>
	<button id="stop" onclick="stop()">stop</button>
	<script>
		function worker_function() {
			var i = 0;

			function timedCount() {
				i = i + 1;
				postMessage(i);
				setTimeout("timedCount()", 500);
			}

			timedCount();
		}
		// This is in case of normal worker start
		// "window" is not defined in web worker
		// so if you load this file directly using `new Worker`
		// the worker code will still execute properly
		var addWorker = new Worker(URL.createObjectURL(new Blob(["("+worker_function.toString()+")()"], {type: 'text/javascript'})));


		// var addWorker = new Worker("js/timer.js"); // 워커 태스크 생성
		addWorker.onmessage = function(e) {
			document.getElementById("timer").innerHTML = e.data;
		}
		function start() {
			addWorker.postMessage("start");
		}
		function stop() {
			addWorker.postMessage("stop");
		}

		
	</script>
</body>
</html>